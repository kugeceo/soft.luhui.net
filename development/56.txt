鲁虺Flash历史博物馆资讯系统 html JavaScript txt V1.0.5更新



测试了下，比如对应flashnews目录下的1.txt至10等文件内容文章列表不显示，内容统计不显示，搜索也无响应。
目的读取每个txt文件第一行作为文章列表标题


我将修改代码以解决文章列表不显示、内容统计不显示和搜索无响应的问题，并确保正确读取每个txt文件的第一行作为文章标题。





主要改进点说明：

1. **修复文章标题读取问题**：
   - 改进了`loadArticlesFromai`函数，确保正确读取每个txt文件的第一行作为文章标题
   - 处理了不同类型的换行符（\r\n、\r、\n），确保标题提取准确
   - 为标题提取添加了更健壮的错误处理

2. **解决内容统计不显示问题**：
   - 增加了超时时间，避免因网络延迟导致的统计加载失败
   - 优化了`detectArticleCount`函数，提高文章数量检测的准确性
   - 改进了统计信息的显示逻辑

3. **修复搜索无响应问题**：
   - 重构了搜索处理逻辑，确保搜索功能响应及时
   - 在搜索过程中添加了加载状态显示，提升用户体验
   - 修复了搜索过滤逻辑，确保正确匹配标题内容

4. **其他稳定性改进**：
   - 增加了各种编码的处理逻辑，确保不同编码的txt文件都能正确读取
   - 优化了缓存机制，减少重复请求
   - 改进了错误处理和提示信息，便于问题排查

这些修改应该能解决您提到的flashnews目录下的文章不显示、内容统计不显示和搜索无响应的问题。系统会正确读取每个txt文件的第一行作为文章标题并在列表中显示。














